# SPI Layer-0 Spec

## Transactions

L0 controller consumes 1 descriptor per transaction with the following fields:

  * instruction - 8-bit code
  * request - address/data payload following the instruction byte
    * length - (0..255) number of payload bits
    * width  - 1/2/4-bit (0/1/2), default:0
    * ddr    - SDR/DDR (0/1), default: 0
  * dummy length - (0..255) number of dummy cycles after the request
  * response - data payload send back to the host
    * length - (0..255) number of response bits
    * width  - 1/2/4-bit (0/1/2), default:0
    * ddr    - SDR/DDR (0/1), default: 0

### Instruction only

```js
{
    instruction: 0x00,
    request:  { length: 0 },
    dummy:    { length: 0 },
    response: { length: 0 }
}
```
![instruction only](https://rawgit.com/drom/spi/master/img/inst.wavedrom.svg)

### Instruction with 1-wire, 1-byte write

```js
{
    instruction: 0x00,
    request:  { length: 8 },
    dummy:    { length: 0 },
    response: { length: 0 }
}
```
![instruction only](https://rawgit.com/drom/spi/master/img/data.wavedrom.svg)

### Instruction with 1-wire, 2-byte read

```js
{
    instruction: 0x00,
    request:  { length: 0 },
    dummy:    { length: 0 },
    response: { length: 16 }
}
```
![instruction only](https://rawgit.com/drom/spi/master/img/coo.wavedrom.svg)

### Instruction, 1-wire, 1-byte write, 2-byte read

```js
{
    instruction: 0x00,
    request:  { length: 8 },
    dummy:    { length: 0 },
    response: { length: 16 }
}
```

![instruction only](https://rawgit.com/drom/spi/master/img/cioo.wavedrom.svg)
